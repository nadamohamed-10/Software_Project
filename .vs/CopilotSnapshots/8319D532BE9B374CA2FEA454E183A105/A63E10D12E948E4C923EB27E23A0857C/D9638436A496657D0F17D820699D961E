using CLINICSYSTEM.Models;

namespace CLINICSYSTEM.Repositories;

/// <summary>
/// Unit of Work interface for managing database transactions
/// </summary>
public interface IUnitOfWork : IDisposable
{
    // Repositories
    IRepository<User> Users { get; }
    IRepository<Patient> Patients { get; }
    IRepository<Doctor> Doctors { get; }
    IRepository<Appointment> Appointments { get; }
    IRepository<TimeSlot> TimeSlots { get; }
    IRepository<DoctorSchedule> DoctorSchedules { get; }
    IRepository<Consultation> Consultations { get; }
    IRepository<Prescription> Prescriptions { get; }
    IRepository<MedicalRecord> MedicalRecords { get; }
    IRepository<MedicalImage> MedicalImages { get; }
    IRepository<Notification> Notifications { get; }

    // Generic repository access
    IRepository<TEntity> Repository<TEntity>() where TEntity : class;

    // Transaction management
    Task<int> SaveChangesAsync(CancellationToken cancellationToken = default);
    Task BeginTransactionAsync(CancellationToken cancellationToken = default);
    Task CommitTransactionAsync(CancellationToken cancellationToken = default);
    Task RollbackTransactionAsync(CancellationToken cancellationToken = default);
}
